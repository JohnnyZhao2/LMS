openapi: 3.0.3
info:
  title: LMS API
  version: 1.0.0
  description: |2

    # 学习管理系统 (LMS) API 文档

    企业级学习管理系统后端 API，实现"学、练、考、评"的能力闭环。

    ## 核心功能模块

    - **用户认证** - JWT 认证、角色切换
    - **用户管理** - 用户 CRUD、角色分配、师徒关系
    - **知识文档** - 知识库管理、分类管理
    - **题库管理** - 题目 CRUD、批量导入
    - **试卷管理** - 试卷 CRUD、题目关联
    - **任务管理** - 学习/练习/考试任务
    - **答题评分** - 答题提交、自动评分、人工评分
    - **抽查管理** - 线下抽查记录
    - **统计分析** - 仪表盘、数据看板
    - **通知服务** - 任务通知、截止提醒

    ## 角色权限

    - **学员 (STUDENT)** - 执行任务、查看知识
    - **导师 (MENTOR)** - 管理名下学员、创建任务
    - **室经理 (DEPT_MANAGER)** - 管理本室人员
    - **管理员 (ADMIN)** - 全平台管理
    - **团队经理 (TEAM_MANAGER)** - 只读数据分析
paths:
  /api/analytics/dashboard/mentor/:
    get:
      operationId: analytics_dashboard_mentor_retrieve
      description: 获取导师或室经理的仪表盘数据，包括所辖学员的完成率、平均分和待评分考试数量
      summary: 获取导师/室经理仪表盘数据
      tags:
      - 导师/室经理仪表盘
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 仪表盘数据
        '403':
          description: 无权限访问
  /api/analytics/dashboard/student/:
    get:
      operationId: analytics_dashboard_student_retrieve
      description: 获取学员仪表盘数据，包括待办任务、最新知识和任务统计
      summary: 获取学员仪表盘数据
      parameters:
      - in: query
        name: knowledge_limit
        schema:
          type: integer
        description: 最新知识数量限制（默认5）
      - in: query
        name: pending_limit
        schema:
          type: integer
        description: 待办任务数量限制（默认10）
      tags:
      - 学员仪表盘
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudentDashboard'
          description: ''
  /api/analytics/knowledge-center/:
    get:
      operationId: analytics_knowledge_center_list
      description: 获取知识文档列表，支持按一级分类和二级分类筛选
      summary: 获取知识中心知识列表
      parameters:
      - in: query
        name: knowledge_type
        schema:
          type: string
        description: 知识类型（EMERGENCY/OTHER）
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（默认1）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页数量（默认20）
      - in: query
        name: primary_category_id
        schema:
          type: integer
        description: 一级分类ID（领域大类）
      - in: query
        name: search
        schema:
          type: string
        description: 搜索关键词（标题或摘要）
      - in: query
        name: secondary_category_id
        schema:
          type: integer
        description: 二级分类ID（系统对象）
      tags:
      - 学员知识中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudentKnowledgeList'
          description: ''
  /api/analytics/knowledge-center/{id}/:
    get:
      operationId: analytics_knowledge_center_retrieve
      description: 获取知识文档详情，包含内容目录
      summary: 获取知识详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 学员知识中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudentKnowledgeDetail'
          description: ''
        '404':
          description: 知识文档不存在
  /api/analytics/knowledge-center/categories/:
    get:
      operationId: analytics_knowledge_center_categories_list
      description: 获取知识中心的一级分类（领域大类）列表，用于筛选
      summary: 获取知识中心一级分类列表
      tags:
      - 学员知识中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudentKnowledgeCategory'
          description: ''
  /api/analytics/knowledge-center/categories/{primary_id}/children/:
    get:
      operationId: analytics_knowledge_center_categories_children_list
      description: 根据一级分类ID获取对应的二级分类（系统对象）列表
      summary: 获取知识中心二级分类列表
      parameters:
      - in: path
        name: primary_id
        schema:
          type: integer
        required: true
      tags:
      - 学员知识中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudentKnowledgeCategory'
          description: ''
        '404':
          description: 一级分类不存在
  /api/analytics/knowledge-heat/:
    get:
      operationId: analytics_knowledge_heat_retrieve
      description: 获取知识文档的阅读统计数据，仅团队经理可访问
      summary: 获取知识热度统计
      parameters:
      - in: query
        name: category_id
        schema:
          type: integer
        description: 分类ID筛选
      - in: query
        name: knowledge_type
        schema:
          type: string
        description: 知识类型筛选（EMERGENCY/OTHER）
      - in: query
        name: limit
        schema:
          type: integer
        description: 返回数量限制（默认20）
      tags:
      - 团队经理数据看板
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 知识热度统计
        '403':
          description: 无权限访问
  /api/analytics/personal-center/profile/:
    get:
      operationId: analytics_personal_center_profile_retrieve
      description: 获取当前登录学员的个人信息，包括姓名、团队、导师等
      summary: 获取学员个人信息
      tags:
      - 学员个人中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
                description: Unspecified response body
          description: ''
  /api/analytics/personal-center/scores/:
    get:
      operationId: analytics_personal_center_scores_retrieve
      description: 获取当前登录学员的练习和考试历史成绩记录
      summary: 获取学员历史成绩
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（默认1）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页数量（默认20）
      - in: query
        name: status
        schema:
          type: string
        description: 状态筛选（SUBMITTED/GRADING/GRADED）
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型筛选（PRACTICE/EXAM）
      tags:
      - 学员个人中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
                description: Unspecified response body
          description: ''
  /api/analytics/personal-center/scores/export/:
    get:
      operationId: analytics_personal_center_scores_export_retrieve
      description: 导出当前登录学员的练习和考试历史成绩记录为CSV文件
      summary: 导出学员历史成绩
      parameters:
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型筛选（PRACTICE/EXAM）
      tags:
      - 学员个人中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: CSV文件
  /api/analytics/personal-center/wrong-answers/:
    get:
      operationId: analytics_personal_center_wrong_answers_retrieve
      description: 获取当前登录学员在练习和考试中答错的题目
      summary: 获取学员错题本
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（默认1）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页数量（默认20）
      - in: query
        name: question_type
        schema:
          type: string
        description: 题目类型筛选（SINGLE_CHOICE/MULTIPLE_CHOICE/TRUE_FALSE/SHORT_ANSWER）
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型筛选（PRACTICE/EXAM）
      tags:
      - 学员个人中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
                description: Unspecified response body
          description: ''
  /api/analytics/task-center/:
    get:
      operationId: analytics_task_center_list
      description: 获取学员的任务列表，支持按类型和状态筛选
      summary: 获取学员任务中心任务列表
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 页码（默认1）
      - in: query
        name: page_size
        schema:
          type: integer
        description: 每页数量（默认20）
      - in: query
        name: search
        schema:
          type: string
        description: 搜索关键词（任务标题）
      - in: query
        name: status
        schema:
          type: string
        description: 任务状态（IN_PROGRESS/COMPLETED/OVERDUE/PENDING_EXAM）
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型（LEARNING/PRACTICE/EXAM）
      tags:
      - 学员任务中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudentTaskCenterList'
          description: ''
  /api/analytics/task-center/{assignment_id}/:
    get:
      operationId: analytics_task_center_retrieve
      description: 获取任务分配详情，包含根据任务类型的跳转路径
      summary: 获取任务详情（含跳转信息）
      parameters:
      - in: path
        name: assignment_id
        schema:
          type: integer
        required: true
      tags:
      - 学员任务中心
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudentTaskCenterList'
          description: ''
        '404':
          description: 任务不存在
  /api/analytics/team-overview/:
    get:
      operationId: analytics_team_overview_retrieve
      description: 获取各室完成率与成绩对比数据，仅团队经理可访问
      summary: 获取团队经理数据看板概览
      tags:
      - 团队经理数据看板
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 数据看板概览
        '403':
          description: 无权限访问
  /api/auth/change-password/:
    post:
      operationId: auth_change_password_create
      description: 用户修改自己的密码
      summary: 修改密码
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 密码修改成功
        '400':
          description: 当前密码错误或新密码不符合要求
  /api/auth/login/:
    post:
      operationId: auth_login_create
      description: 验证用户凭证并返回JWT令牌和用户信息
      summary: 用户登录
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
          description: ''
        '400':
          description: 凭证无效或用户已停用
  /api/auth/logout/:
    post:
      operationId: auth_logout_create
      description: 登出当前用户，使刷新令牌失效
      summary: 用户登出
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogoutRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LogoutRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LogoutRequestRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 登出成功
  /api/auth/refresh/:
    post:
      operationId: auth_refresh_create
      description: 使用刷新令牌获取新的访问令牌
      summary: 刷新令牌
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
          description: ''
        '400':
          description: 刷新令牌无效
  /api/auth/reset-password/:
    post:
      operationId: auth_reset_password_create
      description: 管理员重置指定用户的密码，生成临时密码
      summary: 重置用户密码
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResetPasswordResponse'
          description: ''
        '403':
          description: 无权限执行此操作
        '404':
          description: 用户不存在
  /api/auth/switch-role/:
    post:
      operationId: auth_switch_role_create
      description: 切换当前用户的生效角色，返回新的令牌
      summary: 切换角色
      tags:
      - 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SwitchRoleRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SwitchRoleRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SwitchRoleRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SwitchRoleResponse'
          description: ''
        '400':
          description: 用户没有该角色权限
  /api/grading/{id}/:
    get:
      operationId: grading_retrieve
      description: "\n        获取待评分考试的详细信息，包括学员答案。\n        \n        Requirements:\
        \ 13.2\n        "
      summary: 待评分详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 评分管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GradingDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 答题记录不存在
  /api/grading/{id}/batch-grade/:
    post:
      operationId: grading_batch_grade_create
      description: "\n        批量对多个主观题进行评分。\n        \n        请求体格式:\n        ```json\n\
        \        {\n            \"grades\": [\n                {\"answer_id\": 1,\
        \ \"score\": 8.5, \"comment\": \"回答较好\"},\n                {\"answer_id\"\
        : 2, \"score\": 5.0, \"comment\": \"需要改进\"}\n            ]\n        }\n  \
        \      ```\n        \n        Requirements: 13.3, 13.4\n        "
      summary: 批量评分
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 评分管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GradingDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GradingDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GradingDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GradingDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 答题记录不存在
  /api/grading/{id}/grade/:
    post:
      operationId: grading_grade_create
      description: "\n        对主观题进行评分。\n        \n        - 记录评分结果和评语\n        -\
        \ 所有主观题评分完成后自动计算最终成绩（Property 33）\n        - 存在未评分主观题时保持待评分状态（Property 34）\n\
        \        \n        Requirements: 13.3, 13.4, 13.5\n        "
      summary: 评分
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 评分管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GradeAnswerRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GradeAnswerRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GradeAnswerRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GradingDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 答题记录不存在
  /api/grading/pending/:
    get:
      operationId: grading_pending_list
      description: "\n        获取待评分的考试列表。\n        \n        - 导师只能看到名下学员的待评分考试\n\
        \        - 室经理只能看到本室学员的待评分考试\n        \n        Requirements: 13.1\n     \
        \   "
      summary: 待评分列表
      tags:
      - 评分管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GradingList'
          description: ''
  /api/knowledge/:
    get:
      operationId: knowledge_list
      description: 获取知识文档列表，支持分类和类型筛选
      summary: 获取知识文档列表
      parameters:
      - in: query
        name: category_id
        schema:
          type: integer
        description: 分类ID
      - in: query
        name: knowledge_type
        schema:
          type: string
        description: 知识类型（EMERGENCY/OTHER）
      - in: query
        name: primary_category_id
        schema:
          type: integer
        description: 一级分类ID
      - in: query
        name: search
        schema:
          type: string
        description: 搜索标题或摘要
      - in: query
        name: secondary_category_id
        schema:
          type: integer
        description: 二级分类ID
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/KnowledgeList'
          description: ''
    post:
      operationId: knowledge_create
      description: 创建新的知识文档（仅管理员）
      summary: 创建知识文档
      tags:
      - 知识管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KnowledgeCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/KnowledgeCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/KnowledgeCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
  /api/knowledge/{id}/:
    get:
      operationId: knowledge_retrieve
      description: 获取指定知识文档的详细信息
      summary: 获取知识文档详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeDetail'
          description: ''
        '404':
          description: 知识文档不存在
    patch:
      operationId: knowledge_partial_update
      description: 更新知识文档内容（仅管理员）
      summary: 更新知识文档
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 知识文档不存在
    delete:
      operationId: knowledge_destroy
      description: 删除知识文档（仅管理员，被任务引用时禁止删除）
      summary: 删除知识文档
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: 删除成功
        '400':
          description: 知识文档被任务引用，无法删除
        '403':
          description: 无权限
        '404':
          description: 知识文档不存在
  /api/knowledge/{id}/view/:
    post:
      operationId: knowledge_view_create
      description: 记录知识文档被阅读
      summary: 增加知识阅读次数
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ViewCountResponseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ViewCountResponseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ViewCountResponseRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ViewCountResponse'
          description: ''
        '404':
          description: 知识文档不存在
  /api/knowledge/categories/:
    get:
      operationId: knowledge_categories_list
      description: 获取所有知识分类，支持按层级筛选
      summary: 获取知识分类列表
      parameters:
      - in: query
        name: level
        schema:
          type: integer
        description: 分类层级（1或2）
      - in: query
        name: parent_id
        schema:
          type: integer
        description: 父分类ID
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/KnowledgeCategory'
          description: ''
    post:
      operationId: knowledge_categories_create
      description: 创建新的知识分类（仅管理员）
      summary: 创建知识分类
      tags:
      - 知识管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KnowledgeCategoryCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/KnowledgeCategoryCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/KnowledgeCategoryCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeCategory'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
  /api/knowledge/categories/{id}/:
    get:
      operationId: knowledge_categories_retrieve
      description: 获取指定知识分类的详细信息
      summary: 获取知识分类详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeCategory'
          description: ''
        '404':
          description: 分类不存在
    patch:
      operationId: knowledge_categories_partial_update
      description: 更新知识分类信息（仅管理员）
      summary: 更新知识分类
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeCategoryUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeCategoryUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedKnowledgeCategoryUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeCategory'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 分类不存在
    delete:
      operationId: knowledge_categories_destroy
      description: 删除知识分类（仅管理员，有子分类或关联知识时禁止删除）
      summary: 删除知识分类
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: 删除成功
        '400':
          description: 分类有子分类或关联知识，无法删除
        '403':
          description: 无权限
        '404':
          description: 分类不存在
  /api/knowledge/categories/tree/:
    get:
      operationId: knowledge_categories_tree_list
      description: 获取知识分类的树形结构
      summary: 获取知识分类树
      tags:
      - 知识管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/KnowledgeCategoryTree'
          description: ''
  /api/notifications/:
    get:
      operationId: notifications_list
      description: |-
        通知视图集

        提供通知列表、详情、标记已读等功能。

        Endpoints:
        - GET /api/notifications/ - 通知列表
        - GET /api/notifications/{id}/ - 通知详情
        - POST /api/notifications/{id}/read/ - 标记单条已读
        - POST /api/notifications/read-all/ - 全部标记已读
        - GET /api/notifications/unread-count/ - 未读数量
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      tags:
      - notifications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedNotificationList'
          description: ''
  /api/notifications/{id}/:
    get:
      operationId: notifications_retrieve
      description: |-
        通知视图集

        提供通知列表、详情、标记已读等功能。

        Endpoints:
        - GET /api/notifications/ - 通知列表
        - GET /api/notifications/{id}/ - 通知详情
        - POST /api/notifications/{id}/read/ - 标记单条已读
        - POST /api/notifications/read-all/ - 全部标记已读
        - GET /api/notifications/unread-count/ - 未读数量
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - notifications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationDetail'
          description: ''
  /api/notifications/{id}/read/:
    post:
      operationId: notifications_read_create
      description: |-
        标记单条通知为已读

        POST /api/notifications/{id}/read/
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - notifications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
  /api/notifications/read-all/:
    post:
      operationId: notifications_read_all_create
      description: |-
        标记所有通知为已读

        POST /api/notifications/read-all/
      tags:
      - notifications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
  /api/notifications/unread-count/:
    get:
      operationId: notifications_unread_count_retrieve
      description: |-
        获取未读通知数量

        GET /api/notifications/unread-count/
      tags:
      - notifications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
  /api/questions/:
    get:
      operationId: questions_list
      description: 获取所有题目，支持类型、难度、标签筛选
      summary: 获取题目列表
      parameters:
      - in: query
        name: created_by
        schema:
          type: integer
        description: 创建者ID
      - in: query
        name: difficulty
        schema:
          type: string
        description: 难度等级
      - in: query
        name: question_type
        schema:
          type: string
        description: 题目类型
      - in: query
        name: search
        schema:
          type: string
        description: 搜索题目内容
      - in: query
        name: tag
        schema:
          type: string
        description: 标签
      tags:
      - 题库管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QuestionList'
          description: ''
    post:
      operationId: questions_create
      description: 创建新题目（导师/室经理/管理员）
      summary: 创建题目
      tags:
      - 题库管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuestionCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/QuestionCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/QuestionCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestionDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
  /api/questions/{id}/:
    get:
      operationId: questions_retrieve
      description: 获取指定题目的详细信息
      summary: 获取题目详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 题库管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestionDetail'
          description: ''
        '404':
          description: 题目不存在
    patch:
      operationId: questions_partial_update
      description: 更新题目信息（仅创建者或管理员）
      summary: 更新题目
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 题库管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedQuestionUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedQuestionUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedQuestionUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestionDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 题目不存在
    delete:
      operationId: questions_destroy
      description: 删除题目（仅创建者或管理员，被试卷引用时禁止删除）
      summary: 删除题目
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 题库管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: 删除成功
        '400':
          description: 题目被试卷引用，无法删除
        '403':
          description: 无权限
        '404':
          description: 题目不存在
  /api/questions/import/:
    post:
      operationId: questions_import_create
      description: 从 Excel 文件批量导入题目（仅管理员）
      summary: 批量导入题目
      tags:
      - 题库管理
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/QuestionImportRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/QuestionImportRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          description: 导入成功
        '400':
          description: 文件格式错误或数据无效
        '403':
          description: 无权限
  /api/quizzes/:
    get:
      operationId: quizzes_list
      description: 获取所有试卷，支持搜索和筛选
      summary: 获取试卷列表
      parameters:
      - in: query
        name: created_by
        schema:
          type: integer
        description: 创建者ID
      - in: query
        name: search
        schema:
          type: string
        description: 搜索试卷标题
      tags:
      - 试卷管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QuizList'
          description: ''
    post:
      operationId: quizzes_create
      description: 创建新试卷（导师/室经理/管理员）
      summary: 创建试卷
      tags:
      - 试卷管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/QuizCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/QuizCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
  /api/quizzes/{id}/:
    get:
      operationId: quizzes_retrieve
      description: 获取指定试卷的详细信息，包含题目列表
      summary: 获取试卷详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '404':
          description: 试卷不存在
    patch:
      operationId: quizzes_partial_update
      description: 更新试卷信息（仅创建者或管理员）
      summary: 更新试卷
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedQuizUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedQuizUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedQuizUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 试卷不存在
    delete:
      operationId: quizzes_destroy
      description: 删除试卷（仅创建者或管理员，被任务引用时禁止删除）
      summary: 删除试卷
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: 删除成功
        '400':
          description: 试卷被任务引用，无法删除
        '403':
          description: 无权限
        '404':
          description: 试卷不存在
  /api/quizzes/{id}/add-questions/:
    post:
      operationId: quizzes_add_questions_create
      description: 向试卷添加已有题目或新建题目（仅创建者或管理员）
      summary: 向试卷添加题目
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddQuestionsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AddQuestionsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AddQuestionsRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 试卷不存在
  /api/quizzes/{id}/remove-questions/:
    post:
      operationId: quizzes_remove_questions_create
      description: 从试卷移除指定题目（仅创建者或管理员）
      summary: 从试卷移除题目
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveQuestionsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RemoveQuestionsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/RemoveQuestionsRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 试卷不存在
  /api/quizzes/{id}/reorder-questions/:
    post:
      operationId: quizzes_reorder_questions_create
      description: 重新排序试卷中的题目（仅创建者或管理员）
      summary: 重新排序试卷题目
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 试卷管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReorderQuestionsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReorderQuestionsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReorderQuestionsRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuizDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 试卷不存在
  /api/spot-checks/:
    get:
      operationId: spot_checks_list
      description: 获取所辖范围内的抽查记录列表，按时间倒序排列
      summary: 获取抽查记录列表
      parameters:
      - in: query
        name: student_id
        schema:
          type: integer
        description: 按学员ID筛选
      tags:
      - 抽查管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SpotCheckList'
          description: ''
    post:
      operationId: spot_checks_create
      description: 创建新的抽查记录（导师只能为名下学员创建，室经理只能为本室学员创建）
      summary: 创建抽查记录
      tags:
      - 抽查管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SpotCheckCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SpotCheckCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SpotCheckCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpotCheckDetail'
          description: ''
        '400':
          description: 参数错误或学员不在权限范围内
        '403':
          description: 无权限
  /api/spot-checks/{id}/:
    get:
      operationId: spot_checks_retrieve
      description: 获取指定抽查记录的详细信息
      summary: 获取抽查记录详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 抽查管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpotCheckDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 抽查记录不存在
    patch:
      operationId: spot_checks_partial_update
      description: 更新抽查记录内容（只能更新自己创建的记录）
      summary: 更新抽查记录
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 抽查管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSpotCheckUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSpotCheckUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSpotCheckUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpotCheckDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 抽查记录不存在
    delete:
      operationId: spot_checks_destroy
      description: 删除抽查记录（只能删除自己创建的记录）
      summary: 删除抽查记录
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 抽查管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: 删除成功
        '403':
          description: 无权限
        '404':
          description: 抽查记录不存在
  /api/submissions/{id}/result/:
    get:
      operationId: submissions_result_retrieve
      description: "\n        查看练习结果，包括答案和解析。\n        \n        Requirements: 10.4\n\
        \        "
      summary: 查看练习结果
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 练习答题
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PracticeResult'
          description: ''
        '404':
          description: 答题记录不存在
  /api/submissions/{id}/save-answer/:
    post:
      operationId: submissions_save_answer_create
      description: "\n        保存单个题目的答案。\n        \n        可以在答题过程中多次调用此接口保存答案。\n\
        \        "
      summary: 保存答案
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 练习答题
      - 考试答题
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveAnswerRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SaveAnswerRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SaveAnswerRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 保存成功
        '400':
          description: 参数错误
        '404':
          description: 答题记录不存在
  /api/submissions/{id}/submit-exam/:
    post:
      operationId: submissions_submit_exam_create
      description: "\n        提交考试答卷。\n        \n        - 客观题自动评分（Property 30）\n\
        \        - 包含主观题时状态设为\"待评分\"（Property 31）\n        - 纯客观题直接完成（Property 32）\n\
        \        \n        Requirements: 12.3, 12.4, 12.5, 12.6\n        "
      summary: 提交考试
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 考试答题
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubmissionDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SubmissionDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SubmissionDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionDetail'
          description: ''
        '400':
          description: 参数错误
        '404':
          description: 答题记录不存在
  /api/submissions/{id}/submit-practice/:
    post:
      operationId: submissions_submit_practice_create
      description: "\n        提交练习答卷。\n        \n        - 客观题自动评分（Property 30）\n\
        \        - 当所有试卷都至少完成一次时，任务自动完成（Property 25）\n        \n        Requirements:\
        \ 10.3, 10.6\n        "
      summary: 提交练习
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 练习答题
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PracticeResultRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PracticeResultRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PracticeResultRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PracticeResult'
          description: ''
        '400':
          description: 参数错误
        '404':
          description: 答题记录不存在
  /api/submissions/exam/{id}/result/:
    get:
      operationId: submissions_exam_result_retrieve
      description: "\n        查看考试结果。\n        \n        - 只有已提交的考试才能查看结果\n      \
        \  - 包含答案、得分和解析\n        "
      summary: 查看考试结果
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 考试答题
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionDetail'
          description: ''
        '400':
          description: 考试尚未提交
        '404':
          description: 答题记录不存在
  /api/submissions/exam/start/:
    post:
      operationId: submissions_exam_start_create
      description: "\n        开始考试。\n        \n        - 只能在考试时间窗口内进入（Property 28）\n\
        \        - 每个考试只能提交一次（Property 29）\n        - 如果已有进行中的考试，返回该考试记录\n       \
        \ \n        Requirements: 12.1, 12.2, 12.7, 12.8\n        "
      summary: 开始考试
      tags:
      - 考试答题
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartExamRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StartExamRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StartExamRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionDetail'
          description: ''
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionDetail'
          description: ''
        '400':
          description: 参数错误或不在考试时间窗口内
        '404':
          description: 任务不存在
  /api/submissions/my/:
    get:
      operationId: submissions_my_list
      description: 获取当前用户的所有答题记录
      summary: 我的答题记录
      parameters:
      - in: query
        name: status
        schema:
          type: string
        description: 状态
      - in: query
        name: task_id
        schema:
          type: integer
        description: 任务ID
      tags:
      - 练习答题
      - 考试答题
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SubmissionList'
          description: ''
  /api/submissions/practice/history/{task_id}/:
    get:
      operationId: submissions_practice_history_list
      description: "\n        查看练习任务的历史记录，包括每个试卷的：\n        - 作答次数\n        - 最近成绩\n\
        \        - 最佳成绩\n        \n        Requirements: 10.4\n        "
      summary: 查看练习历史
      parameters:
      - in: path
        name: task_id
        schema:
          type: integer
        required: true
      tags:
      - 练习答题
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QuizPracticeHistory'
          description: ''
        '404':
          description: 任务不存在
  /api/submissions/practice/start/:
    post:
      operationId: submissions_practice_start_create
      description: "\n        开始一次新的练习。\n        \n        - 练习任务可以多次提交（Property 24）\n\
        \        - 即使任务已完成也可以继续练习（Property 26）\n        \n        Requirements: 10.2,\
        \ 10.5\n        "
      summary: 开始练习
      tags:
      - 练习答题
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartPracticeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/StartPracticeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/StartPracticeRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionDetail'
          description: ''
        '400':
          description: 参数错误
        '404':
          description: 任务或试卷不存在
  /api/tasks/:
    get:
      operationId: tasks_list
      description: "\n        获取任务列表，根据用户角色返回不同范围的数据：\n        - 管理员：全平台所有任务\n   \
        \     - 导师：自己创建的任务\n        - 室经理：自己创建的任务\n        - 学员：分配给自己的任务\n        "
      summary: 获取任务列表
      parameters:
      - in: query
        name: is_closed
        schema:
          type: boolean
        description: 是否已结束
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型（LEARNING/PRACTICE/EXAM）
      tags:
      - 任务管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TaskList'
          description: ''
  /api/tasks/{id}/:
    get:
      operationId: tasks_retrieve
      description: 获取指定任务的详细信息
      summary: 获取任务详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 任务管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDetail'
          description: ''
        '404':
          description: 任务不存在
  /api/tasks/{id}/close/:
    post:
      operationId: tasks_close_create
      description: "\n        强制结束任务。\n        \n        - 只有管理员可以执行此操作\n        -\
        \ 任务状态将设为\"已结束\"\n        - 未完成的分配记录将标记为\"已逾期\"\n        \n        Requirements:\
        \ 7.6, 20.3\n        "
      summary: 强制结束任务
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 任务管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TaskDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TaskDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 任务不存在
  /api/tasks/{task_id}/complete-knowledge/:
    post:
      operationId: tasks_complete_knowledge_create
      description: "\n        标记知识文档为已学习。\n        \n        - 记录完成状态和完成时间\n     \
        \   - 当所有知识都完成时，自动将任务状态设为已完成\n        \n        Requirements: 8.3, 8.5\n \
        \       Properties: 20, 21\n        "
      summary: 完成知识学习
      parameters:
      - in: path
        name: task_id
        schema:
          type: integer
        required: true
      tags:
      - 学员任务执行
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteKnowledgeLearningRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CompleteKnowledgeLearningRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CompleteKnowledgeLearningRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeLearningProgress'
          description: ''
        '400':
          description: 参数错误
        '404':
          description: 任务或知识不存在
  /api/tasks/{task_id}/learning-detail/:
    get:
      operationId: tasks_learning_detail_retrieve
      description: "\n        获取学员的学习任务详情，包括：\n        - 任务基本信息（标题、介绍、分配人、截止时间）\n\
        \        - 整体进度\n        - 知识文档列表及学习状态\n        \n        Requirements: 8.1,\
        \ 8.2, 8.4\n        "
      summary: 获取学习任务详情
      parameters:
      - in: path
        name: task_id
        schema:
          type: integer
        required: true
      tags:
      - 学员任务执行
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudentLearningTaskDetail'
          description: ''
        '404':
          description: 任务不存在
  /api/tasks/exam/:
    post:
      operationId: tasks_exam_create
      description: "\n        创建考试任务并分配给学员。\n        \n        考试任务特点：\n        -\
        \ 只能选择一个试卷\n        - 必须设置考试开始时间、截止时间、考试时长和及格分数\n        - 学员初始状态为\"待考试\"\n\
        \        \n        权限要求：\n        - 导师：只能选择名下学员\n        - 室经理：只能选择本室学员\n\
        \        - 管理员：可以选择任意学员\n        \n        Requirements: 11.1, 11.2, 11.3,\
        \ 11.4, 11.5, 11.6\n        "
      summary: 创建考试任务
      tags:
      - 任务管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExamTaskCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ExamTaskCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ExamTaskCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDetail'
          description: ''
        '400':
          description: 参数错误或学员超出权限范围
        '403':
          description: 无权限
  /api/tasks/learning/:
    post:
      operationId: tasks_learning_create
      description: "\n        创建学习任务并分配给学员。\n        \n        权限要求：\n        - 导师：只能选择名下学员\n\
        \        - 室经理：只能选择本室学员\n        - 管理员：可以选择任意学员\n        \n        Requirements:\
        \ 7.1, 7.2, 7.3, 7.4, 7.5\n        "
      summary: 创建学习任务
      tags:
      - 任务管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LearningTaskCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LearningTaskCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LearningTaskCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDetail'
          description: ''
        '400':
          description: 参数错误或学员超出权限范围
        '403':
          description: 无权限
  /api/tasks/my-assignments/:
    get:
      operationId: tasks_my_assignments_list
      description: "\n        获取当前学员的任务分配列表。\n        \n        支持筛选：\n        - task_type:\
        \ 任务类型（LEARNING/PRACTICE/EXAM）\n        - status: 任务状态（IN_PROGRESS/COMPLETED/OVERDUE/PENDING_EXAM）\n\
        \        \n        Requirements: 8.1, 17.1, 17.2\n        "
      summary: 获取我的任务列表
      parameters:
      - in: query
        name: status
        schema:
          type: string
        description: 任务状态（IN_PROGRESS/COMPLETED/OVERDUE/PENDING_EXAM）
      - in: query
        name: task_type
        schema:
          type: string
        description: 任务类型（LEARNING/PRACTICE/EXAM）
      tags:
      - 学员任务执行
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudentAssignmentList'
          description: ''
  /api/tasks/practice/:
    post:
      operationId: tasks_practice_create
      description: "\n        创建练习任务并分配给学员。\n        \n        权限要求：\n        - 导师：只能选择名下学员\n\
        \        - 室经理：只能选择本室学员\n        - 管理员：可以选择任意学员\n        \n        Requirements:\
        \ 9.1, 9.2, 9.3, 9.4, 9.5\n        "
      summary: 创建练习任务
      tags:
      - 任务管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PracticeTaskCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PracticeTaskCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PracticeTaskCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDetail'
          description: ''
        '400':
          description: 参数错误或学员超出权限范围
        '403':
          description: 无权限
  /api/users/:
    get:
      operationId: users_list
      description: 获取所有用户列表（仅管理员）
      summary: 获取用户列表
      parameters:
      - in: query
        name: department_id
        schema:
          type: integer
        description: 按部门筛选
      - in: query
        name: is_active
        schema:
          type: boolean
        description: 按激活状态筛选
      - in: query
        name: search
        schema:
          type: string
        description: 搜索姓名或工号
      tags:
      - 用户管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserList'
          description: ''
        '403':
          description: 无权限
    post:
      operationId: users_create
      description: 创建新用户，自动分配学员角色
      summary: 创建用户
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
  /api/users/{id}/:
    get:
      operationId: users_retrieve
      description: 获取指定用户的详细信息
      summary: 获取用户详情
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 用户不存在
    patch:
      operationId: users_partial_update
      description: 更新用户的基础信息和组织归属
      summary: 更新用户信息
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 用户不存在
  /api/users/{id}/activate/:
    post:
      operationId: users_activate_create
      description: 启用已停用的用户，恢复登录能力
      summary: 启用用户
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 用户不存在
  /api/users/{id}/assign-mentor/:
    post:
      operationId: users_assign_mentor_create
      description: 为学员指定导师，传入null解除绑定
      summary: 指定导师
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignMentorRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssignMentorRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssignMentorRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 用户不存在
  /api/users/{id}/assign-roles/:
    post:
      operationId: users_assign_roles_create
      description: 为用户分配角色，学员角色自动保留
      summary: 分配角色
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRolesRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssignRolesRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssignRolesRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '400':
          description: 参数错误
        '403':
          description: 无权限
        '404':
          description: 用户不存在
  /api/users/{id}/deactivate/:
    post:
      operationId: users_deactivate_create
      description: 停用指定用户，用户将无法登录
      summary: 停用用户
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - 用户管理
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetail'
          description: ''
        '403':
          description: 无权限
        '404':
          description: 用户不存在
  /api/users/department-members/:
    get:
      operationId: users_department_members_list
      description: 获取当前室经理所在室的所有成员
      summary: 获取本室成员
      tags:
      - 用户管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DepartmentMemberList'
          description: ''
        '403':
          description: 无权限
  /api/users/mentees/:
    get:
      operationId: users_mentees_list
      description: 获取当前导师名下的所有学员
      summary: 获取名下学员
      tags:
      - 用户管理
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MenteeList'
          description: ''
        '403':
          description: 无权限
components:
  schemas:
    AddNewQuestionRequest:
      type: object
      description: |-
        Serializer for adding a new question to a quiz.

        Requirements:
        - 6.2: 向试卷添加题目时允许新建题目
        - 6.3: 在创建试卷时新建的题目纳入题库，题目作者为当前用户
      properties:
        content:
          type: string
          minLength: 1
        question_type:
          enum:
          - SINGLE_CHOICE
          - MULTIPLE_CHOICE
          - TRUE_FALSE
          - SHORT_ANSWER
          type: string
          description: |-
            * `SINGLE_CHOICE` - 单选题
            * `MULTIPLE_CHOICE` - 多选题
            * `TRUE_FALSE` - 判断题
            * `SHORT_ANSWER` - 简答题
        options:
          type: object
          additionalProperties: {}
        answer:
          type: object
          additionalProperties: {}
        explanation:
          type: string
          minLength: 1
          default: ''
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          default: '1.00'
        difficulty:
          enum:
          - EASY
          - MEDIUM
          - HARD
          type: string
          description: |-
            * `EASY` - 简单
            * `MEDIUM` - 中等
            * `HARD` - 困难
          default: MEDIUM
        tags:
          type: object
          additionalProperties: {}
      required:
      - answer
      - content
      - question_type
    AddQuestionsRequest:
      type: object
      description: |-
        Serializer for adding questions to a quiz.

        Supports both adding existing questions and creating new ones.

        Requirements:
        - 6.2: 向试卷添加题目时允许从全平台题库选择已有题目或新建题目
        - 6.3: 在创建试卷时新建的题目纳入题库，题目作者为当前用户
      properties:
        existing_question_ids:
          type: array
          items:
            type: integer
          description: 要添加的已有题目ID列表
        new_questions:
          type: array
          items:
            $ref: '#/components/schemas/AddNewQuestionRequest'
          description: 要新建的题目列表
    Answer:
      type: object
      description: Serializer for Answer model.
      properties:
        id:
          type: integer
          readOnly: true
        question:
          type: integer
          title: 题目
        question_content:
          type: string
          readOnly: true
        question_type:
          type: string
          readOnly: true
        question_type_display:
          type: string
          readOnly: true
        question_options:
          type: object
          additionalProperties: {}
          readOnly: true
        question_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          readOnly: true
        user_answer:
          type: object
          additionalProperties: {}
          nullable: true
          title: 用户答案
        is_correct:
          type: boolean
          readOnly: true
          nullable: true
          title: 是否正确
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          readOnly: true
          title: 得分
        correct_answer:
          type: object
          additionalProperties: {}
          readOnly: true
        explanation:
          type: string
          readOnly: true
        graded_by:
          type: integer
          readOnly: true
          nullable: true
          title: 评分人
        graded_by_name:
          type: string
          readOnly: true
        graded_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: 评分时间
        comment:
          type: string
          readOnly: true
          title: 评语
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - comment
      - correct_answer
      - created_at
      - explanation
      - graded_at
      - graded_by
      - graded_by_name
      - id
      - is_correct
      - obtained_score
      - question
      - question_content
      - question_options
      - question_score
      - question_type
      - question_type_display
      - updated_at
    AnswerRequest:
      type: object
      description: Serializer for Answer model.
      properties:
        question:
          type: integer
          title: 题目
        user_answer:
          type: object
          additionalProperties: {}
          nullable: true
          title: 用户答案
      required:
      - question
    AssignMentorRequest:
      type: object
      description: |-
        Serializer for assigning a mentor to a user.

        Requirements:
        - 3.4: 为学员指定导师建立师徒绑定关系
        - 3.5: 移除绑定时传入 null
        - 3.6: 一个学员同时只能绑定一个导师（自动解除原有绑定）
      properties:
        mentor_id:
          type: integer
          nullable: true
          description: 导师用户ID，传入null解除绑定
    AssignRolesRequest:
      type: object
      description: |-
        Serializer for assigning roles to a user.

        Requirements:
        - 2.6: 在保留默认学员角色的基础上附加其他角色
      properties:
        role_codes:
          type: array
          items:
            enum:
            - MENTOR
            - DEPT_MANAGER
            - ADMIN
            - TEAM_MANAGER
            type: string
            description: |-
              * `MENTOR` - 导师
              * `DEPT_MANAGER` - 室经理
              * `ADMIN` - 管理员
              * `TEAM_MANAGER` - 团队经理
          description: 要分配的角色代码列表（不包含学员角色，学员角色自动保留）
      required:
      - role_codes
    ChangePasswordRequestRequest:
      type: object
      description: Serializer for user changing their own password.
      properties:
        old_password:
          type: string
          writeOnly: true
          minLength: 1
          description: 当前密码
        new_password:
          type: string
          writeOnly: true
          minLength: 1
          description: 新密码
      required:
      - new_password
      - old_password
    CompleteKnowledgeLearningRequest:
      type: object
      description: |-
        Serializer for completing knowledge learning.

        Requirements:
        - 8.3: 学员点击「我已学习掌握」时记录完成状态和完成时间

        Properties:
        - Property 20: 知识学习完成记录
      properties:
        knowledge_id:
          type: integer
          description: 要标记为已学习的知识文档ID
      required:
      - knowledge_id
    Department:
      type: object
      description: Serializer for Department model.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: 部门名称
          maxLength: 50
        code:
          type: string
          title: 部门代码
          maxLength: 20
      required:
      - code
      - id
      - name
    DepartmentMemberList:
      type: object
      description: Serializer for listing department members.
      properties:
        id:
          type: integer
          readOnly: true
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          maxLength: 150
        mentor:
          allOf:
          - $ref: '#/components/schemas/Mentor'
          readOnly: true
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          readOnly: true
        is_active:
          type: boolean
      required:
      - id
      - mentor
      - roles
      - username
    DepartmentRequest:
      type: object
      description: Serializer for Department model.
      properties:
        name:
          type: string
          minLength: 1
          title: 部门名称
          maxLength: 50
        code:
          type: string
          minLength: 1
          title: 部门代码
          maxLength: 20
      required:
      - code
      - name
    ExamTaskCreateRequest:
      type: object
      description: |-
        Serializer for creating exam tasks.

        Requirements:
        - 11.1: 创建考试任务时要求选择唯一试卷、设置考试时间窗口、限时和目标学员
        - 11.2: 用户设置考试规则时存储开始时间、截止时间、考试时长和及格分数
        - 11.3: 导师创建考试任务时仅允许选择其名下学员
        - 11.4: 室经理创建考试任务时仅允许选择本室学员
        - 11.5: 管理员创建考试任务时允许选择任意学员
        - 11.6: 考试任务创建成功后为每个学员创建任务分配记录，初始状态为"待考试"

        Properties:
        - Property 17: 导师任务学员范围限制
        - Property 18: 室经理任务学员范围限制
        - Property 19: 任务分配记录完整性
        - Property 27: 考试任务唯一试卷
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          default: ''
        deadline:
          type: string
          format: date-time
        assignee_ids:
          type: array
          items:
            type: integer
          description: 学员ID列表（至少选择一个）
          minItems: 1
        quiz_id:
          type: integer
          description: 试卷ID（考试任务只能选择一个试卷）
        start_time:
          type: string
          format: date-time
          description: 考试开始时间
        duration:
          type: integer
          minimum: 1
          description: 考试时长（分钟）
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          description: 及格分数
      required:
      - assignee_ids
      - deadline
      - duration
      - pass_score
      - quiz_id
      - start_time
      - title
    GradeAnswerRequest:
      type: object
      description: |-
        Serializer for grading a subjective answer.

        Requirements:
        - 13.3: 评分人提交主观题分数和评语时记录评分结果
        - 13.4: 所有主观题评分完成时计算最终成绩并将考试状态设为"已完成"
        - 13.5: 考试存在未评分的主观题时保持考试状态为"待评分"

        Properties:
        - Property 33: 评分完成状态转换
        - Property 34: 未完成评分状态保持
      properties:
        answer_id:
          type: integer
          description: 答案ID
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          description: 给定分数
        comment:
          type: string
          default: ''
          description: 评语
      required:
      - answer_id
      - score
    GradingDetail:
      type: object
      description: |-
        Serializer for grading detail view.

        Requirements:
        - 13.2: 评分人查看待评分考试时展示学员答案和评分输入界面
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        user:
          type: integer
          title: 答题用户
        user_name:
          type: string
          readOnly: true
        task_title:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        answers:
          type: array
          items:
            $ref: '#/components/schemas/Answer'
          readOnly: true
        ungraded_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - answers
      - created_at
      - id
      - quiz
      - quiz_title
      - task_title
      - ungraded_count
      - user
      - user_name
    GradingDetailRequest:
      type: object
      description: |-
        Serializer for grading detail view.

        Requirements:
        - 13.2: 评分人查看待评分考试时展示学员答案和评分输入界面
      properties:
        quiz:
          type: integer
          title: 试卷
        user:
          type: integer
          title: 答题用户
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
      required:
      - quiz
      - user
    GradingList:
      type: object
      description: |-
        Serializer for grading list view.

        Requirements:
        - 13.1: 导师/室经理查看评分中心时展示所辖学员的待评分考试列表
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        user:
          type: integer
          title: 答题用户
        user_name:
          type: string
          readOnly: true
        user_employee_id:
          type: string
          readOnly: true
        task_title:
          type: string
          readOnly: true
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        ungraded_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - created_at
      - id
      - quiz
      - quiz_title
      - task_title
      - ungraded_count
      - user
      - user_employee_id
      - user_name
    KnowledgeCategory:
      type: object
      description: Serializer for KnowledgeCategory model.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: 分类名称
          maxLength: 100
        code:
          type: string
          title: 分类代码
          maxLength: 50
        parent:
          type: integer
          nullable: true
          title: 父分类
        description:
          type: string
          title: 分类描述
        sort_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          title: 排序顺序
        level:
          type: string
          readOnly: true
        is_primary:
          type: string
          readOnly: true
        children_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - children_count
      - code
      - created_at
      - id
      - is_primary
      - level
      - name
      - updated_at
    KnowledgeCategoryCreateRequest:
      type: object
      description: Serializer for creating knowledge categories.
      properties:
        name:
          type: string
          minLength: 1
          title: 分类名称
          maxLength: 100
        code:
          type: string
          minLength: 1
          title: 分类代码
          maxLength: 50
        parent:
          type: integer
          nullable: true
          title: 父分类
        description:
          type: string
          title: 分类描述
        sort_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          title: 排序顺序
      required:
      - code
      - name
    KnowledgeCategoryTree:
      type: object
      description: Serializer for category tree with children.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: 分类名称
          maxLength: 100
        code:
          type: string
          title: 分类代码
          maxLength: 50
        description:
          type: string
          title: 分类描述
        sort_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          title: 排序顺序
        children:
          type: string
          readOnly: true
      required:
      - children
      - code
      - id
      - name
    KnowledgeCreateRequest:
      type: object
      description: |-
        Serializer for creating knowledge documents.

        Requirements:
        - 4.1: 创建知识文档时要求指定知识类型
        - 4.2: 应急类知识启用结构化正文字段
        - 4.3: 其他类型知识启用 Markdown/富文本自由正文
        - 4.6: 设置知识分类
      properties:
        title:
          type: string
          minLength: 1
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        summary:
          type: string
          title: 摘要
        content:
          type: string
          title: 正文内容
        fault_scenario:
          type: string
          title: 故障场景
        trigger_process:
          type: string
          title: 触发流程
        solution:
          type: string
          title: 解决方案
        verification_plan:
          type: string
          title: 验证方案
        recovery_plan:
          type: string
          title: 恢复方案
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        category_ids:
          type: array
          items:
            type: integer
          writeOnly: true
          description: 分类ID列表
      required:
      - knowledge_type
      - title
    KnowledgeDetail:
      type: object
      description: |-
        Serializer for knowledge detail view.

        Requirements: 4.1, 4.2, 4.3, 4.6
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        summary:
          type: string
          title: 摘要
        content:
          type: string
          title: 正文内容
        fault_scenario:
          type: string
          title: 故障场景
        trigger_process:
          type: string
          title: 触发流程
        solution:
          type: string
          title: 解决方案
        verification_plan:
          type: string
          title: 验证方案
        recovery_plan:
          type: string
          title: 恢复方案
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        categories:
          type: array
          items:
            $ref: '#/components/schemas/KnowledgeCategory'
          readOnly: true
        primary_category:
          allOf:
          - $ref: '#/components/schemas/KnowledgeCategory'
          readOnly: true
        secondary_category:
          allOf:
          - $ref: '#/components/schemas/KnowledgeCategory'
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        updated_by_name:
          type: string
          readOnly: true
        view_count:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 阅读次数
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - categories
      - created_at
      - created_by_name
      - id
      - knowledge_type
      - primary_category
      - secondary_category
      - title
      - updated_at
      - updated_by_name
    KnowledgeLearningProgress:
      type: object
      description: |-
        Serializer for KnowledgeLearningProgress model.

        Requirements:
        - 8.3: 记录完成状态和完成时间
        - 8.4: 展示完成时间

        Properties:
        - Property 20: 知识学习完成记录
      properties:
        id:
          type: integer
          readOnly: true
        knowledge_id:
          type: integer
          readOnly: true
        knowledge_title:
          type: string
          readOnly: true
        knowledge_type:
          type: string
          readOnly: true
        order:
          type: integer
          readOnly: true
        is_completed:
          type: boolean
          readOnly: true
          title: 是否完成
        completed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: 完成时间
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - completed_at
      - created_at
      - id
      - is_completed
      - knowledge_id
      - knowledge_title
      - knowledge_type
      - order
      - updated_at
    KnowledgeList:
      type: object
      description: |-
        Serializer for knowledge list view.

        Requirements: 4.1, 4.6
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        summary:
          type: string
          title: 摘要
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        primary_category:
          allOf:
          - $ref: '#/components/schemas/KnowledgeCategory'
          readOnly: true
        secondary_category:
          allOf:
          - $ref: '#/components/schemas/KnowledgeCategory'
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        updated_by_name:
          type: string
          readOnly: true
        view_count:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 阅读次数
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by_name
      - id
      - knowledge_type
      - primary_category
      - secondary_category
      - title
      - updated_at
      - updated_by_name
    LatestKnowledge:
      type: object
      description: |-
        Serializer for latest knowledge documents on dashboard.

        Requirements:
        - 15.2: 展示最新发布的知识文档
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        knowledge_type_display:
          type: string
          readOnly: true
        summary:
          type: string
          title: 摘要
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        created_by_name:
          type: string
          readOnly: true
        updated_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by_name
      - id
      - knowledge_type
      - knowledge_type_display
      - title
      - updated_at
      - updated_by_name
    LearningTaskCreateRequest:
      type: object
      description: |-
        Serializer for creating learning tasks.

        Requirements:
        - 7.1: 创建学习任务时要求选择知识文档（可多选）和目标学员
        - 7.2: 导师创建学习任务时仅允许选择其名下学员
        - 7.3: 室经理创建学习任务时仅允许选择本室学员
        - 7.4: 管理员创建学习任务时允许选择任意学员
        - 7.5: 学习任务创建成功后为每个学员创建任务分配记录

        Properties:
        - Property 17: 导师任务学员范围限制
        - Property 18: 室经理任务学员范围限制
        - Property 19: 任务分配记录完整性
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          default: ''
        deadline:
          type: string
          format: date-time
        assignee_ids:
          type: array
          items:
            type: integer
          description: 学员ID列表（至少选择一个）
          minItems: 1
        knowledge_ids:
          type: array
          items:
            type: integer
          description: 知识文档ID列表（至少选择一个）
          minItems: 1
      required:
      - assignee_ids
      - deadline
      - knowledge_ids
      - title
    LoginRequestRequest:
      type: object
      description: |-
        Serializer for login request.

        Requirements: 1.1
      properties:
        employee_id:
          type: string
          minLength: 1
          description: 工号
        password:
          type: string
          writeOnly: true
          minLength: 1
          description: 密码
      required:
      - employee_id
      - password
    LoginResponse:
      type: object
      description: |-
        Serializer for login response.

        Requirements: 1.1, 1.2
      properties:
        access_token:
          type: string
          description: 访问令牌
        refresh_token:
          type: string
          description: 刷新令牌
        user:
          allOf:
          - $ref: '#/components/schemas/UserInfo'
          description: 用户信息
        available_roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          description: 可用角色列表
        current_role:
          type: string
          description: 当前生效角色
      required:
      - access_token
      - available_roles
      - current_role
      - refresh_token
      - user
    LogoutRequestRequest:
      type: object
      description: Serializer for logout request.
      properties:
        refresh_token:
          type: string
          minLength: 1
          description: 刷新令牌（可选，用于黑名单）
    MenteeList:
      type: object
      description: Serializer for listing mentees.
      properties:
        id:
          type: integer
          readOnly: true
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          maxLength: 150
        department:
          allOf:
          - $ref: '#/components/schemas/Department'
          readOnly: true
        is_active:
          type: boolean
      required:
      - department
      - id
      - username
    Mentor:
      type: object
      description: Serializer for mentor information.
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          maxLength: 150
        employee_id:
          type: string
          nullable: true
          maxLength: 100
      required:
      - id
      - username
    MentorRequest:
      type: object
      description: Serializer for mentor information.
      properties:
        username:
          type: string
          minLength: 1
          maxLength: 150
        employee_id:
          type: string
          nullable: true
          maxLength: 100
      required:
      - username
    Notification:
      type: object
      description: |-
        通知序列化器

        用于通知列表和详情展示。
      properties:
        id:
          type: integer
          readOnly: true
        notification_type:
          enum:
          - TASK_ASSIGNED
          - DEADLINE_REMINDER
          - GRADING_COMPLETED
          - SPOT_CHECK
          type: string
          description: |-
            * `TASK_ASSIGNED` - 任务分配
            * `DEADLINE_REMINDER` - 截止提醒
            * `GRADING_COMPLETED` - 评分完成
            * `SPOT_CHECK` - 抽查通知
          readOnly: true
          title: 通知类型
        notification_type_display:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
          title: 通知标题
        content:
          type: string
          readOnly: true
          title: 通知内容
        is_read:
          type: boolean
          readOnly: true
          title: 是否已读
        read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: 已读时间
        task_id:
          type: integer
          readOnly: true
          nullable: true
        task_title:
          type: string
          readOnly: true
          nullable: true
        task_type:
          type: string
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - content
      - created_at
      - id
      - is_read
      - notification_type
      - notification_type_display
      - read_at
      - task_id
      - task_title
      - task_type
      - title
    NotificationDetail:
      type: object
      description: |-
        通知详情序列化器

        包含更多关联信息。
      properties:
        id:
          type: integer
          readOnly: true
        notification_type:
          enum:
          - TASK_ASSIGNED
          - DEADLINE_REMINDER
          - GRADING_COMPLETED
          - SPOT_CHECK
          type: string
          description: |-
            * `TASK_ASSIGNED` - 任务分配
            * `DEADLINE_REMINDER` - 截止提醒
            * `GRADING_COMPLETED` - 评分完成
            * `SPOT_CHECK` - 抽查通知
          readOnly: true
          title: 通知类型
        notification_type_display:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
          title: 通知标题
        content:
          type: string
          readOnly: true
          title: 通知内容
        is_read:
          type: boolean
          readOnly: true
          title: 是否已读
        read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: 已读时间
        task_id:
          type: integer
          readOnly: true
          nullable: true
        task_title:
          type: string
          readOnly: true
          nullable: true
        task_type:
          type: string
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        submission_id:
          type: integer
          readOnly: true
          nullable: true
        spot_check_id:
          type: integer
          readOnly: true
          nullable: true
      required:
      - content
      - created_at
      - id
      - is_read
      - notification_type
      - notification_type_display
      - read_at
      - spot_check_id
      - submission_id
      - task_id
      - task_title
      - task_type
      - title
    PaginatedNotificationList:
      type: object
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
    PatchedKnowledgeCategoryUpdateRequest:
      type: object
      description: Serializer for updating knowledge categories.
      properties:
        name:
          type: string
          minLength: 1
          title: 分类名称
          maxLength: 100
        description:
          type: string
          title: 分类描述
        sort_order:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          title: 排序顺序
    PatchedKnowledgeUpdateRequest:
      type: object
      description: |-
        Serializer for updating knowledge documents.

        Requirements:
        - 4.4: 编辑知识文档时更新内容并记录最后更新时间
      properties:
        title:
          type: string
          minLength: 1
          title: 标题
          maxLength: 200
        summary:
          type: string
          title: 摘要
        content:
          type: string
          title: 正文内容
        fault_scenario:
          type: string
          title: 故障场景
        trigger_process:
          type: string
          title: 触发流程
        solution:
          type: string
          title: 解决方案
        verification_plan:
          type: string
          title: 验证方案
        recovery_plan:
          type: string
          title: 恢复方案
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        category_ids:
          type: array
          items:
            type: integer
          writeOnly: true
          description: 分类ID列表
    PatchedQuestionUpdateRequest:
      type: object
      description: |-
        Serializer for updating questions.

        Requirements:
        - 5.3: 导师或室经理仅允许编辑自己创建的题目
        - 5.5: 管理员允许编辑所有题目
      properties:
        content:
          type: string
          minLength: 1
          title: 题目内容
        options:
          type: object
          additionalProperties: {}
          title: 选项
        answer:
          type: object
          additionalProperties: {}
          title: 答案
        explanation:
          type: string
          title: 解析
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 分值
        difficulty:
          enum:
          - EASY
          - MEDIUM
          - HARD
          type: string
          description: |-
            * `EASY` - 简单
            * `MEDIUM` - 中等
            * `HARD` - 困难
          title: 难度等级
        tags:
          type: object
          additionalProperties: {}
          title: 标签
    PatchedQuizUpdateRequest:
      type: object
      description: |-
        Serializer for updating quizzes.

        Requirements:
        - 6.5: 导师或室经理仅允许编辑自己创建的试卷
        - 6.7: 管理员允许编辑所有试卷
      properties:
        title:
          type: string
          minLength: 1
          title: 试卷名称
          maxLength: 200
        description:
          type: string
          title: 试卷描述
    PatchedSpotCheckUpdateRequest:
      type: object
      description: |-
        Serializer for updating spot check records.

        Note: student and checker cannot be changed after creation.
      properties:
        content:
          type: string
          minLength: 1
          title: 抽查内容
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 评分
        comment:
          type: string
          title: 评语
        checked_at:
          type: string
          format: date-time
          title: 抽查时间
    PatchedUserUpdateRequest:
      type: object
      description: |-
        Serializer for updating user information.

        Requirements:
        - 2.2: 更新用户的基础信息和组织归属
      properties:
        username:
          type: string
          minLength: 1
          maxLength: 150
        department_id:
          type: integer
          nullable: true
          description: 部门ID
    PracticeResult:
      type: object
      description: |-
        Serializer for practice result view.

        Requirements:
        - 10.4: 学员查看已完成的试卷子任务时展示最近成绩、最佳成绩和作答次数和题目解析
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        attempt_number:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 答题次数
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        status_display:
          type: string
          readOnly: true
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        started_at:
          type: string
          format: date-time
          readOnly: true
          title: 开始时间
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        answers:
          type: array
          items:
            $ref: '#/components/schemas/Answer'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - answers
      - created_at
      - id
      - quiz
      - quiz_title
      - started_at
      - status_display
    PracticeResultRequest:
      type: object
      description: |-
        Serializer for practice result view.

        Requirements:
        - 10.4: 学员查看已完成的试卷子任务时展示最近成绩、最佳成绩和作答次数和题目解析
      properties:
        quiz:
          type: integer
          title: 试卷
        attempt_number:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 答题次数
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
      required:
      - quiz
    PracticeTaskCreateRequest:
      type: object
      description: |-
        Serializer for creating practice tasks.

        Requirements:
        - 9.1: 创建练习任务时要求选择试卷（可多选）、可选关联知识文档和目标学员
        - 9.2: 导师创建练习任务时仅允许选择其名下学员
        - 9.3: 室经理创建练习任务时仅允许选择本室学员
        - 9.4: 管理员创建练习任务时允许选择任意学员
        - 9.5: 练习任务创建成功后为每个学员创建任务分配记录，初始状态为"进行中"

        Properties:
        - Property 17: 导师任务学员范围限制
        - Property 18: 室经理任务学员范围限制
        - Property 19: 任务分配记录完整性
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          default: ''
        deadline:
          type: string
          format: date-time
        assignee_ids:
          type: array
          items:
            type: integer
          description: 学员ID列表（至少选择一个）
          minItems: 1
        quiz_ids:
          type: array
          items:
            type: integer
          description: 试卷ID列表（至少选择一个）
          minItems: 1
        knowledge_ids:
          type: array
          items:
            type: integer
          description: 知识文档ID列表（可选）
      required:
      - assignee_ids
      - deadline
      - quiz_ids
      - title
    QuestionCreateRequest:
      type: object
      description: |-
        Serializer for creating questions.

        Requirements:
        - 5.1: 创建题目时存储题目内容、类型、答案和解析，并记录创建者
      properties:
        content:
          type: string
          minLength: 1
          title: 题目内容
        question_type:
          enum:
          - SINGLE_CHOICE
          - MULTIPLE_CHOICE
          - TRUE_FALSE
          - SHORT_ANSWER
          type: string
          description: |-
            * `SINGLE_CHOICE` - 单选题
            * `MULTIPLE_CHOICE` - 多选题
            * `TRUE_FALSE` - 判断题
            * `SHORT_ANSWER` - 简答题
          title: 题目类型
        options:
          type: object
          additionalProperties: {}
          title: 选项
        answer:
          type: object
          additionalProperties: {}
          title: 答案
        explanation:
          type: string
          title: 解析
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 分值
        difficulty:
          enum:
          - EASY
          - MEDIUM
          - HARD
          type: string
          description: |-
            * `EASY` - 简单
            * `MEDIUM` - 中等
            * `HARD` - 困难
          title: 难度等级
        tags:
          type: object
          additionalProperties: {}
          title: 标签
      required:
      - answer
      - content
      - question_type
    QuestionDetail:
      type: object
      description: |-
        Serializer for question detail view.

        Requirements: 5.1, 5.2
      properties:
        id:
          type: integer
          readOnly: true
        content:
          type: string
          title: 题目内容
        question_type:
          enum:
          - SINGLE_CHOICE
          - MULTIPLE_CHOICE
          - TRUE_FALSE
          - SHORT_ANSWER
          type: string
          description: |-
            * `SINGLE_CHOICE` - 单选题
            * `MULTIPLE_CHOICE` - 多选题
            * `TRUE_FALSE` - 判断题
            * `SHORT_ANSWER` - 简答题
          title: 题目类型
        question_type_display:
          type: string
          readOnly: true
        options:
          type: object
          additionalProperties: {}
          title: 选项
        answer:
          type: object
          additionalProperties: {}
          title: 答案
        explanation:
          type: string
          title: 解析
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 分值
        difficulty:
          enum:
          - EASY
          - MEDIUM
          - HARD
          type: string
          description: |-
            * `EASY` - 简单
            * `MEDIUM` - 中等
            * `HARD` - 困难
          title: 难度等级
        difficulty_display:
          type: string
          readOnly: true
        tags:
          type: object
          additionalProperties: {}
          title: 标签
        is_objective:
          type: string
          readOnly: true
        is_subjective:
          type: string
          readOnly: true
        created_by:
          type: integer
          title: 创建者
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - answer
      - content
      - created_at
      - created_by
      - created_by_name
      - difficulty_display
      - id
      - is_objective
      - is_subjective
      - question_type
      - question_type_display
      - updated_at
    QuestionImportRequest:
      type: object
      description: |-
        Serializer for bulk importing questions from Excel.

        Requirements:
        - 5.6: 管理员批量导入题目时解析 Excel 模板并创建题目记录
      properties:
        file:
          type: string
          format: binary
          description: Excel 文件
      required:
      - file
    QuestionList:
      type: object
      description: |-
        Serializer for question list view.

        Requirements: 5.2
      properties:
        id:
          type: integer
          readOnly: true
        content:
          type: string
          title: 题目内容
        question_type:
          enum:
          - SINGLE_CHOICE
          - MULTIPLE_CHOICE
          - TRUE_FALSE
          - SHORT_ANSWER
          type: string
          description: |-
            * `SINGLE_CHOICE` - 单选题
            * `MULTIPLE_CHOICE` - 多选题
            * `TRUE_FALSE` - 判断题
            * `SHORT_ANSWER` - 简答题
          title: 题目类型
        question_type_display:
          type: string
          readOnly: true
        difficulty:
          enum:
          - EASY
          - MEDIUM
          - HARD
          type: string
          description: |-
            * `EASY` - 简单
            * `MEDIUM` - 中等
            * `HARD` - 困难
          title: 难度等级
        difficulty_display:
          type: string
          readOnly: true
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 分值
        tags:
          type: object
          additionalProperties: {}
          title: 标签
        is_objective:
          type: string
          readOnly: true
        created_by:
          type: integer
          title: 创建者
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - content
      - created_at
      - created_by
      - created_by_name
      - difficulty_display
      - id
      - is_objective
      - question_type
      - question_type_display
      - updated_at
    QuizCreateRequest:
      type: object
      description: |-
        Serializer for creating quizzes.

        Requirements:
        - 6.1: 创建试卷时存储试卷名称、描述，并记录创建者
      properties:
        title:
          type: string
          minLength: 1
          title: 试卷名称
          maxLength: 200
        description:
          type: string
          title: 试卷描述
      required:
      - title
    QuizDetail:
      type: object
      description: |-
        Serializer for quiz detail view.

        Requirements: 6.1, 6.2
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 试卷名称
          maxLength: 200
        description:
          type: string
          title: 试卷描述
        question_count:
          type: string
          readOnly: true
        total_score:
          type: string
          readOnly: true
        has_subjective_questions:
          type: string
          readOnly: true
        objective_question_count:
          type: string
          readOnly: true
        subjective_question_count:
          type: string
          readOnly: true
        questions:
          type: string
          readOnly: true
        created_by:
          type: integer
          title: 创建者
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by
      - created_by_name
      - has_subjective_questions
      - id
      - objective_question_count
      - question_count
      - questions
      - subjective_question_count
      - title
      - total_score
      - updated_at
    QuizList:
      type: object
      description: |-
        Serializer for quiz list view.

        Requirements: 6.4 - 导师或室经理查看试卷列表时展示所有试卷
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 试卷名称
          maxLength: 200
        description:
          type: string
          title: 试卷描述
        question_count:
          type: string
          readOnly: true
        total_score:
          type: string
          readOnly: true
        has_subjective_questions:
          type: string
          readOnly: true
        created_by:
          type: integer
          title: 创建者
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by
      - created_by_name
      - has_subjective_questions
      - id
      - question_count
      - title
      - total_score
      - updated_at
    QuizPracticeHistory:
      type: object
      description: |-
        Serializer for quiz practice history.

        Requirements:
        - 10.4: 展示最近成绩、最佳成绩和作答次数
      properties:
        quiz_id:
          type: integer
        quiz_title:
          type: string
        attempt_count:
          type: integer
        latest_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
        best_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
        latest_submission_id:
          type: integer
          nullable: true
        best_submission_id:
          type: integer
          nullable: true
      required:
      - attempt_count
      - best_score
      - best_submission_id
      - latest_score
      - latest_submission_id
      - quiz_id
      - quiz_title
    RefreshTokenRequestRequest:
      type: object
      description: Serializer for token refresh request.
      properties:
        refresh_token:
          type: string
          minLength: 1
          description: 刷新令牌
      required:
      - refresh_token
    RefreshTokenResponse:
      type: object
      description: Serializer for token refresh response.
      properties:
        access_token:
          type: string
          description: 新的访问令牌
        refresh_token:
          type: string
          description: 新的刷新令牌
      required:
      - access_token
      - refresh_token
    RemoveQuestionsRequest:
      type: object
      description: Serializer for removing questions from a quiz.
      properties:
        question_ids:
          type: array
          items:
            type: integer
          description: 要移除的题目ID列表
          minItems: 1
      required:
      - question_ids
    ReorderQuestionsRequest:
      type: object
      description: Serializer for reordering questions in a quiz.
      properties:
        question_ids:
          type: array
          items:
            type: integer
          description: 按新顺序排列的题目ID列表
          minItems: 1
      required:
      - question_ids
    ResetPasswordRequestRequest:
      type: object
      description: |-
        Serializer for password reset request (admin only).

        Requirements: 1.6
      properties:
        user_id:
          type: integer
          description: 要重置密码的用户ID
      required:
      - user_id
    ResetPasswordResponse:
      type: object
      description: |-
        Serializer for password reset response.

        Requirements: 1.6
      properties:
        temporary_password:
          type: string
          description: 临时密码
        message:
          type: string
          description: 提示信息
      required:
      - message
      - temporary_password
    Role:
      type: object
      description: Serializer for Role model.
      properties:
        code:
          enum:
          - STUDENT
          - MENTOR
          - DEPT_MANAGER
          - ADMIN
          - TEAM_MANAGER
          type: string
          description: |-
            * `STUDENT` - 学员
            * `MENTOR` - 导师
            * `DEPT_MANAGER` - 室经理
            * `ADMIN` - 管理员
            * `TEAM_MANAGER` - 团队经理
          title: 角色代码
        name:
          type: string
          title: 角色名称
          maxLength: 50
      required:
      - code
      - name
    RoleRequest:
      type: object
      description: Serializer for Role model.
      properties:
        code:
          enum:
          - STUDENT
          - MENTOR
          - DEPT_MANAGER
          - ADMIN
          - TEAM_MANAGER
          type: string
          description: |-
            * `STUDENT` - 学员
            * `MENTOR` - 导师
            * `DEPT_MANAGER` - 室经理
            * `ADMIN` - 管理员
            * `TEAM_MANAGER` - 团队经理
          title: 角色代码
        name:
          type: string
          minLength: 1
          title: 角色名称
          maxLength: 50
      required:
      - code
      - name
    SaveAnswerRequest:
      type: object
      description: |-
        Serializer for saving an answer during practice/exam.

        Requirements:
        - 10.2: 学员开始练习时允许作答
      properties:
        question_id:
          type: integer
          description: 题目ID
        user_answer:
          type: object
          additionalProperties: {}
          nullable: true
          description: 用户答案
      required:
      - question_id
      - user_answer
    SpotCheckCreateRequest:
      type: object
      description: |-
        Serializer for creating spot check records.

        Requirements:
        - 14.1: 存储被抽查学员、抽查内容、评分和评语
        - 14.2: 导师创建抽查记录时仅允许选择其名下学员
        - 14.3: 室经理创建抽查记录时仅允许选择本室学员

        Property 35: 抽查学员范围限制
      properties:
        student:
          type: integer
          title: 被抽查学员
        content:
          type: string
          minLength: 1
          title: 抽查内容
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 评分
        comment:
          type: string
          title: 评语
        checked_at:
          type: string
          format: date-time
          title: 抽查时间
      required:
      - checked_at
      - content
      - score
      - student
    SpotCheckDetail:
      type: object
      description: |-
        Serializer for spot check detail view.

        Requirements: 14.1
      properties:
        id:
          type: integer
          readOnly: true
        student:
          type: integer
          title: 被抽查学员
        student_name:
          type: string
          readOnly: true
        student_employee_id:
          type: string
          readOnly: true
        student_department:
          type: string
          readOnly: true
          nullable: true
        checker:
          type: integer
          readOnly: true
          title: 抽查人
        checker_name:
          type: string
          readOnly: true
        content:
          type: string
          title: 抽查内容
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 评分
        comment:
          type: string
          title: 评语
        checked_at:
          type: string
          format: date-time
          title: 抽查时间
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - checked_at
      - checker
      - checker_name
      - content
      - created_at
      - id
      - score
      - student
      - student_department
      - student_employee_id
      - student_name
      - updated_at
    SpotCheckList:
      type: object
      description: |-
        Serializer for spot check list view.

        Requirements: 14.4
        Property 36: 抽查记录时间排序
      properties:
        id:
          type: integer
          readOnly: true
        student:
          type: integer
          title: 被抽查学员
        student_name:
          type: string
          readOnly: true
        student_employee_id:
          type: string
          readOnly: true
        checker:
          type: integer
          readOnly: true
          title: 抽查人
        checker_name:
          type: string
          readOnly: true
        content:
          type: string
          title: 抽查内容
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: 评分
        comment:
          type: string
          title: 评语
        checked_at:
          type: string
          format: date-time
          title: 抽查时间
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - checked_at
      - checker
      - checker_name
      - content
      - created_at
      - id
      - score
      - student
      - student_employee_id
      - student_name
      - updated_at
    StartExamRequest:
      type: object
      description: |-
        Serializer for starting an exam.

        Requirements:
        - 12.1: 学员查看考试任务详情时展示任务标题、介绍、题目数量、考试时长、及格分数、开始时间和截止时间
        - 12.2: 学员在考试时间窗口内进入考试时加载试卷并开始计时
        - 12.7: 学员已提交考试时禁止重新作答
        - 12.8: 当前时间不在考试时间窗口内时禁止进入考试

        Properties:
        - Property 28: 考试时间窗口控制
        - Property 29: 考试单次提交限制
      properties:
        task_id:
          type: integer
          description: 任务ID
      required:
      - task_id
    StartPracticeRequest:
      type: object
      description: |-
        Serializer for starting a practice session.

        Requirements:
        - 10.2: 学员开始练习时加载试卷题目并允许作答
        - 10.5: 学员可选择再次练习同一试卷

        Properties:
        - Property 24: 练习允许多次提交
        - Property 26: 已完成练习仍可继续
      properties:
        task_id:
          type: integer
          description: 任务ID
        quiz_id:
          type: integer
          description: 试卷ID
      required:
      - quiz_id
      - task_id
    StudentAssignmentList:
      type: object
      description: |-
        Serializer for student's task assignment list.

        Requirements:
        - 17.2: 展示任务标题、类型、状态、截止时间和进度

        Properties:
        - Property 23: 任务逾期状态标记
      properties:
        id:
          type: integer
          readOnly: true
        task_id:
          type: integer
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_description:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - COMPLETED
          - OVERDUE
          - PENDING_EXAM
          type: string
          description: |-
            * `IN_PROGRESS` - 进行中
            * `COMPLETED` - 已完成
            * `OVERDUE` - 已逾期
            * `PENDING_EXAM` - 待考试
          title: 状态
        status_display:
          type: string
          readOnly: true
        progress:
          type: string
          readOnly: true
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          nullable: true
          title: 成绩
        completed_at:
          type: string
          format: date-time
          nullable: true
          title: 完成时间
        start_time:
          type: string
          format: date-time
          readOnly: true
        duration:
          type: integer
          readOnly: true
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by_name
      - deadline
      - duration
      - id
      - pass_score
      - progress
      - start_time
      - status_display
      - task_description
      - task_id
      - task_title
      - task_type
      - task_type_display
      - updated_at
    StudentDashboard:
      type: object
      description: |-
        Serializer for student dashboard data.

        Requirements:
        - 15.1: 展示待办任务列表（学习/练习/考试）
        - 15.2: 展示最新发布的知识文档
        - 15.3: 点击待办任务跳转到对应任务详情页
      properties:
        pending_tasks:
          type: array
          items:
            $ref: '#/components/schemas/StudentPendingTask'
          readOnly: true
        latest_knowledge:
          type: array
          items:
            $ref: '#/components/schemas/LatestKnowledge'
          readOnly: true
        task_summary:
          type: object
          additionalProperties: {}
          readOnly: true
      required:
      - latest_knowledge
      - pending_tasks
      - task_summary
    StudentKnowledgeCategory:
      type: object
      description: |-
        Serializer for knowledge categories in student knowledge center.

        Requirements:
        - 16.1: 支持一级筛选（领域大类）和二级筛选（系统对象）
        - 16.2: 动态加载对应的二级分类选项
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: 分类名称
          maxLength: 100
        code:
          type: string
          title: 分类代码
          maxLength: 50
        description:
          type: string
          title: 分类描述
        level:
          type: string
          readOnly: true
        knowledge_count:
          type: string
          readOnly: true
      required:
      - code
      - id
      - knowledge_count
      - level
      - name
    StudentKnowledgeDetail:
      type: object
      description: |-
        Serializer for knowledge detail in student knowledge center.

        Requirements:
        - 16.4: 应急类知识按结构化字段顺序展示已填写内容
        - 16.5: 其他类型知识展示 Markdown/富文本正文
        - 16.6: 在右侧展示自动生成的内容目录
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        knowledge_type_display:
          type: string
          readOnly: true
        summary:
          type: string
          title: 摘要
        content:
          type: string
          title: 正文内容
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        fault_scenario:
          type: string
          title: 故障场景
        trigger_process:
          type: string
          title: 触发流程
        solution:
          type: string
          title: 解决方案
        verification_plan:
          type: string
          title: 验证方案
        recovery_plan:
          type: string
          title: 恢复方案
        structured_content:
          type: string
          readOnly: true
        table_of_contents:
          type: string
          readOnly: true
        primary_category_name:
          type: string
          readOnly: true
        secondary_category_name:
          type: string
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        updated_by_name:
          type: string
          readOnly: true
        view_count:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 阅读次数
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by_name
      - id
      - knowledge_type
      - knowledge_type_display
      - primary_category_name
      - secondary_category_name
      - structured_content
      - table_of_contents
      - title
      - updated_at
      - updated_by_name
    StudentKnowledgeList:
      type: object
      description: |-
        Serializer for knowledge list in student knowledge center.

        Requirements:
        - 16.3: 以卡片形式展示操作标签、标题、摘要、修改人和修改时间
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 标题
          maxLength: 200
        knowledge_type:
          enum:
          - EMERGENCY
          - OTHER
          type: string
          description: |-
            * `EMERGENCY` - 应急类
            * `OTHER` - 其他类型
          title: 知识类型
        knowledge_type_display:
          type: string
          readOnly: true
        summary:
          type: string
          title: 摘要
        operation_tags:
          type: object
          additionalProperties: {}
          title: 操作类型标签
        primary_category_name:
          type: string
          readOnly: true
        secondary_category_name:
          type: string
          readOnly: true
        updated_by_name:
          type: string
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - id
      - knowledge_type
      - knowledge_type_display
      - primary_category_name
      - secondary_category_name
      - title
      - updated_at
      - updated_by_name
    StudentLearningTaskDetail:
      type: object
      description: |-
        Serializer for student's learning task detail view.

        Requirements:
        - 8.1: 展示任务标题、介绍、分配人、截止时间、整体进度和知识文档列表
        - 8.2: 展示知识内容和「我已学习掌握」按钮状态
        - 8.4: 展示已完成的知识子任务的完成时间

        Properties:
        - Property 20: 知识学习完成记录
        - Property 21: 学习任务自动完成
      properties:
        id:
          type: integer
          readOnly: true
        task_id:
          type: integer
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_description:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - COMPLETED
          - OVERDUE
          - PENDING_EXAM
          type: string
          description: |-
            * `IN_PROGRESS` - 进行中
            * `COMPLETED` - 已完成
            * `OVERDUE` - 已逾期
            * `PENDING_EXAM` - 待考试
          title: 状态
        status_display:
          type: string
          readOnly: true
        progress:
          type: string
          readOnly: true
        completed_at:
          type: string
          format: date-time
          nullable: true
          title: 完成时间
        knowledge_items:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - created_by_name
      - deadline
      - id
      - knowledge_items
      - progress
      - status_display
      - task_description
      - task_id
      - task_title
      - task_type
      - task_type_display
      - updated_at
    StudentPendingTask:
      type: object
      description: |-
        Serializer for student's pending tasks on dashboard.

        Requirements:
        - 15.1: 展示待办任务列表（学习/练习/考试）
        - 15.3: 点击待办任务跳转到对应任务详情页
      properties:
        id:
          type: integer
          readOnly: true
        task_id:
          type: integer
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - COMPLETED
          - OVERDUE
          - PENDING_EXAM
          type: string
          description: |-
            * `IN_PROGRESS` - 进行中
            * `COMPLETED` - 已完成
            * `OVERDUE` - 已逾期
            * `PENDING_EXAM` - 待考试
          title: 状态
        status_display:
          type: string
          readOnly: true
        progress:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - created_at
      - created_by_name
      - deadline
      - id
      - progress
      - status_display
      - task_id
      - task_title
      - task_type
      - task_type_display
    StudentTaskCenterList:
      type: object
      description: |-
        Serializer for task list in student task center.

        Requirements:
        - 17.1: 展示任务列表，支持按类型和状态筛选
        - 17.2: 展示任务标题、类型、状态、截止时间和进度
        - 17.3: 点击任务时根据任务类型跳转到对应的任务详情页
      properties:
        id:
          type: integer
          readOnly: true
        task_id:
          type: integer
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_description:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          readOnly: true
        start_time:
          type: string
          format: date-time
          readOnly: true
        duration:
          type: integer
          readOnly: true
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - COMPLETED
          - OVERDUE
          - PENDING_EXAM
          type: string
          description: |-
            * `IN_PROGRESS` - 进行中
            * `COMPLETED` - 已完成
            * `OVERDUE` - 已逾期
            * `PENDING_EXAM` - 待考试
          title: 状态
        status_display:
          type: string
          readOnly: true
        progress:
          type: string
          readOnly: true
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          nullable: true
          title: 成绩
        completed_at:
          type: string
          format: date-time
          nullable: true
          title: 完成时间
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
      required:
      - created_at
      - created_by_name
      - deadline
      - duration
      - id
      - pass_score
      - progress
      - start_time
      - status_display
      - task_description
      - task_id
      - task_title
      - task_type
      - task_type_display
    SubmissionDetail:
      type: object
      description: Serializer for submission detail view.
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        user:
          type: integer
          title: 答题用户
        user_name:
          type: string
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        attempt_number:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 答题次数
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        status_display:
          type: string
          readOnly: true
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        is_passed:
          type: string
          readOnly: true
        pass_score:
          type: string
          readOnly: true
        started_at:
          type: string
          format: date-time
          readOnly: true
          title: 开始时间
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        remaining_seconds:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          nullable: true
          title: 剩余时间（秒）
        answers:
          type: array
          items:
            $ref: '#/components/schemas/Answer'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - answers
      - created_at
      - id
      - is_passed
      - pass_score
      - quiz
      - quiz_title
      - started_at
      - status_display
      - task_title
      - task_type
      - updated_at
      - user
      - user_name
    SubmissionDetailRequest:
      type: object
      description: Serializer for submission detail view.
      properties:
        quiz:
          type: integer
          title: 试卷
        user:
          type: integer
          title: 答题用户
        attempt_number:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 答题次数
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        remaining_seconds:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          nullable: true
          title: 剩余时间（秒）
      required:
      - quiz
      - user
    SubmissionList:
      type: object
      description: Serializer for submission list view.
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        user:
          type: integer
          title: 答题用户
        user_name:
          type: string
          readOnly: true
        task_title:
          type: string
          readOnly: true
        task_type:
          type: string
          readOnly: true
        attempt_number:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          title: 答题次数
        status:
          enum:
          - IN_PROGRESS
          - SUBMITTED
          - GRADING
          - GRADED
          type: string
          description: |-
            * `IN_PROGRESS` - 答题中
            * `SUBMITTED` - 已提交
            * `GRADING` - 待评分
            * `GRADED` - 已评分
          title: 状态
        status_display:
          type: string
          readOnly: true
        total_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          title: 试卷总分
        obtained_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,4}(?:\.\d{0,2})?$
          nullable: true
          title: 获得分数
        started_at:
          type: string
          format: date-time
          readOnly: true
          title: 开始时间
        submitted_at:
          type: string
          format: date-time
          nullable: true
          title: 提交时间
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - id
      - quiz
      - quiz_title
      - started_at
      - status_display
      - task_title
      - task_type
      - updated_at
      - user
      - user_name
    SwitchRoleRequestRequest:
      type: object
      description: |-
        Serializer for role switch request.

        Requirements: 1.3
      properties:
        role_code:
          enum:
          - STUDENT
          - MENTOR
          - DEPT_MANAGER
          - ADMIN
          - TEAM_MANAGER
          type: string
          description: |-
            要切换到的角色代码

            * `STUDENT` - 学员
            * `MENTOR` - 导师
            * `DEPT_MANAGER` - 室经理
            * `ADMIN` - 管理员
            * `TEAM_MANAGER` - 团队经理
      required:
      - role_code
    SwitchRoleResponse:
      type: object
      description: |-
        Serializer for role switch response.

        Requirements: 1.3, 1.4
      properties:
        access_token:
          type: string
          description: 新的访问令牌
        refresh_token:
          type: string
          description: 新的刷新令牌
        user:
          allOf:
          - $ref: '#/components/schemas/UserInfo'
          description: 用户信息
        available_roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          description: 可用角色列表
        current_role:
          type: string
          description: 当前生效角色
      required:
      - access_token
      - available_roles
      - current_role
      - refresh_token
      - user
    TaskAssignment:
      type: object
      description: Serializer for TaskAssignment model.
      properties:
        id:
          type: integer
          readOnly: true
        assignee:
          type: integer
          title: 学员
        assignee_name:
          type: string
          readOnly: true
        assignee_employee_id:
          type: string
          readOnly: true
        status:
          enum:
          - IN_PROGRESS
          - COMPLETED
          - OVERDUE
          - PENDING_EXAM
          type: string
          description: |-
            * `IN_PROGRESS` - 进行中
            * `COMPLETED` - 已完成
            * `OVERDUE` - 已逾期
            * `PENDING_EXAM` - 待考试
          readOnly: true
          title: 状态
        completed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: 完成时间
        score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          readOnly: true
          nullable: true
          title: 成绩
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - assignee
      - assignee_employee_id
      - assignee_name
      - completed_at
      - created_at
      - id
      - score
      - status
      - updated_at
    TaskAssignmentRequest:
      type: object
      description: Serializer for TaskAssignment model.
      properties:
        assignee:
          type: integer
          title: 学员
      required:
      - assignee
    TaskDetail:
      type: object
      description: Serializer for task detail view.
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 任务标题
          maxLength: 200
        description:
          type: string
          title: 任务描述
        task_type:
          enum:
          - LEARNING
          - PRACTICE
          - EXAM
          type: string
          description: |-
            * `LEARNING` - 学习任务
            * `PRACTICE` - 练习任务
            * `EXAM` - 考试任务
          title: 任务类型
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          title: 截止时间
        start_time:
          type: string
          format: date-time
          nullable: true
          title: 考试开始时间
        duration:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          nullable: true
          title: 考试时长（分钟）
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          nullable: true
          title: 及格分数
        is_closed:
          type: boolean
          title: 是否已结束
        closed_at:
          type: string
          format: date-time
          nullable: true
          title: 结束时间
        knowledge_items:
          type: array
          items:
            $ref: '#/components/schemas/TaskKnowledge'
          readOnly: true
        quizzes:
          type: array
          items:
            $ref: '#/components/schemas/TaskQuiz'
          readOnly: true
        assignments:
          type: array
          items:
            $ref: '#/components/schemas/TaskAssignment'
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - assignments
      - created_at
      - created_by_name
      - deadline
      - id
      - knowledge_items
      - quizzes
      - task_type
      - task_type_display
      - title
      - updated_at
    TaskDetailRequest:
      type: object
      description: Serializer for task detail view.
      properties:
        title:
          type: string
          minLength: 1
          title: 任务标题
          maxLength: 200
        description:
          type: string
          title: 任务描述
        task_type:
          enum:
          - LEARNING
          - PRACTICE
          - EXAM
          type: string
          description: |-
            * `LEARNING` - 学习任务
            * `PRACTICE` - 练习任务
            * `EXAM` - 考试任务
          title: 任务类型
        deadline:
          type: string
          format: date-time
          title: 截止时间
        start_time:
          type: string
          format: date-time
          nullable: true
          title: 考试开始时间
        duration:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          nullable: true
          title: 考试时长（分钟）
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          nullable: true
          title: 及格分数
        is_closed:
          type: boolean
          title: 是否已结束
        closed_at:
          type: string
          format: date-time
          nullable: true
          title: 结束时间
      required:
      - deadline
      - task_type
      - title
    TaskKnowledge:
      type: object
      description: Serializer for TaskKnowledge model.
      properties:
        id:
          type: integer
          readOnly: true
        knowledge:
          type: integer
          title: 知识文档
        knowledge_title:
          type: string
          readOnly: true
        knowledge_type:
          type: string
          readOnly: true
        order:
          type: integer
          readOnly: true
          title: 顺序
      required:
      - id
      - knowledge
      - knowledge_title
      - knowledge_type
      - order
    TaskKnowledgeRequest:
      type: object
      description: Serializer for TaskKnowledge model.
      properties:
        knowledge:
          type: integer
          title: 知识文档
      required:
      - knowledge
    TaskList:
      type: object
      description: Serializer for task list view.
      properties:
        id:
          type: integer
          readOnly: true
        title:
          type: string
          title: 任务标题
          maxLength: 200
        description:
          type: string
          title: 任务描述
        task_type:
          enum:
          - LEARNING
          - PRACTICE
          - EXAM
          type: string
          description: |-
            * `LEARNING` - 学习任务
            * `PRACTICE` - 练习任务
            * `EXAM` - 考试任务
          title: 任务类型
        task_type_display:
          type: string
          readOnly: true
        deadline:
          type: string
          format: date-time
          title: 截止时间
        start_time:
          type: string
          format: date-time
          nullable: true
          title: 考试开始时间
        duration:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
          nullable: true
          title: 考试时长（分钟）
        pass_score:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          nullable: true
          title: 及格分数
        is_closed:
          type: boolean
          title: 是否已结束
        closed_at:
          type: string
          format: date-time
          nullable: true
          title: 结束时间
        knowledge_count:
          type: string
          readOnly: true
        quiz_count:
          type: string
          readOnly: true
        assignee_count:
          type: string
          readOnly: true
        created_by_name:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - assignee_count
      - created_at
      - created_by_name
      - deadline
      - id
      - knowledge_count
      - quiz_count
      - task_type
      - task_type_display
      - title
      - updated_at
    TaskQuiz:
      type: object
      description: Serializer for TaskQuiz model.
      properties:
        id:
          type: integer
          readOnly: true
        quiz:
          type: integer
          title: 试卷
        quiz_title:
          type: string
          readOnly: true
        question_count:
          type: string
          readOnly: true
        order:
          type: integer
          readOnly: true
          title: 顺序
      required:
      - id
      - order
      - question_count
      - quiz
      - quiz_title
    TaskQuizRequest:
      type: object
      description: Serializer for TaskQuiz model.
      properties:
        quiz:
          type: integer
          title: 试卷
      required:
      - quiz
    UserCreateRequest:
      type: object
      description: |-
        Serializer for creating new users.

        Requirements:
        - 2.1: 创建新用户时存储基础信息并默认分配学员角色
      properties:
        password:
          type: string
          writeOnly: true
          minLength: 1
          description: 密码
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          minLength: 1
          maxLength: 150
        department_id:
          type: integer
          description: 部门ID
      required:
      - department_id
      - password
      - username
    UserDetail:
      type: object
      description: |-
        Serializer for user detail view.

        Requirements: 2.1, 2.2
      properties:
        id:
          type: integer
          readOnly: true
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          maxLength: 150
        department:
          allOf:
          - $ref: '#/components/schemas/Department'
          readOnly: true
        mentor:
          allOf:
          - $ref: '#/components/schemas/Mentor'
          readOnly: true
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          readOnly: true
        is_active:
          type: boolean
        mentees_count:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - department
      - id
      - mentees_count
      - mentor
      - roles
      - updated_at
      - username
    UserDetailRequest:
      type: object
      description: |-
        Serializer for user detail view.

        Requirements: 2.1, 2.2
      properties:
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          minLength: 1
          maxLength: 150
        is_active:
          type: boolean
      required:
      - username
    UserInfo:
      type: object
      description: |-
        Serializer for user information in responses.

        Used in login response and other user-related endpoints.
      properties:
        id:
          type: integer
          readOnly: true
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          maxLength: 150
        department:
          allOf:
          - $ref: '#/components/schemas/Department'
          readOnly: true
        mentor:
          allOf:
          - $ref: '#/components/schemas/Mentor'
          readOnly: true
        is_active:
          type: boolean
      required:
      - department
      - id
      - mentor
      - username
    UserList:
      type: object
      description: |-
        Serializer for user list view.

        Requirements: 2.1, 2.2
      properties:
        id:
          type: integer
          readOnly: true
        employee_id:
          type: string
          nullable: true
          maxLength: 100
        username:
          type: string
          maxLength: 150
        department:
          allOf:
          - $ref: '#/components/schemas/Department'
          readOnly: true
        mentor:
          allOf:
          - $ref: '#/components/schemas/Mentor'
          readOnly: true
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          readOnly: true
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: 创建时间
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: 更新时间
      required:
      - created_at
      - department
      - id
      - mentor
      - roles
      - updated_at
      - username
    ViewCountResponse:
      type: object
      description: Serializer for view count response.
      properties:
        view_count:
          type: integer
      required:
      - view_count
    ViewCountResponseRequest:
      type: object
      description: Serializer for view count response.
      properties:
        view_count:
          type: integer
      required:
      - view_count
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: 'JWT 认证，格式: Bearer <token>'
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
tags:
- name: 认证
  description: 用户登录、登出、角色切换
- name: 用户管理
  description: 用户 CRUD、角色分配、师徒关系
- name: 知识管理
  description: 知识库管理、分类管理
- name: 题库管理
  description: 题目管理、批量导入
- name: 试卷管理
  description: 试卷管理、题目关联
- name: 任务管理
  description: 学习/练习/考试任务创建与管理
- name: 学员任务执行
  description: 学员查看和执行分配的任务
- name: 练习答题
  description: 练习任务答题提交
- name: 考试答题
  description: 考试任务答题提交
- name: 评分管理
  description: 待评分列表、主观题评分
- name: 抽查管理
  description: 线下抽查记录管理
- name: 学员仪表盘
  description: 学员首页待办任务和最新知识
- name: 学员知识中心
  description: 学员浏览知识文档
- name: 学员任务中心
  description: 学员任务列表和筛选
- name: 学员个人中心
  description: 个人信息、历史成绩、错题本
- name: 导师/室经理仪表盘
  description: 导师和室经理的统计数据
- name: 团队经理数据看板
  description: 团队经理只读数据分析
- name: 通知
  description: 通知列表、已读标记

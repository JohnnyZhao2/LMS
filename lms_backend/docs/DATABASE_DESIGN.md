# LMS Database Overview

## 数据库已成功创建！

### 创建的表（共19张）

1. **users** (11条记录) - 用户表
2. **roles** (5条记录) - 角色表
3. **departments** (2条记录) - 部门表
4. **user_roles** (20条记录) - 用户角色关联表
5. **knowledge_categories** (17条记录) - 知识分类表
6. **knowledge** (5条记录) - 知识文档表
7. **knowledge_category_relations** (11条记录) - 知识分类关联表
8. **questions** (5条记录) - 题目表
9. **quizzes** (1条记录) - 测验表
10. **quiz_questions** (5条记录) - 测验题目关联表
11. **tasks** (3条记录) - 任务表
12. **task_knowledge** (4条记录) - 任务知识关联表
13. **task_quiz** (2条记录) - 任务测验关联表
14. **task_assignments** (15条记录) - 任务分配表
15. **submissions** (1条记录) - 答题记录表
16. **answers** (5条记录) - 答案记录表
17. **spot_checks** (2条记录) - 现场抽查表
18. **notifications** (2条记录) - 通知表
19. **user_learning_stats** (1条记录) - 用户学习统计表
20. **knowledge_view_logs** (0条记录) - 知识浏览日志表

---

## 模拟数据概览

### 用户数据

**管理员：**
- username: `admin` (拥有所有角色)

**部门经理：**
- username: `manager1` - 一室经理 (张经理)
- username: `manager2` - 二室经理 (李经理)

**导师：**
- username: `mentor1` - 王导师 (一室)
- username: `mentor2` - 赵导师 (一室)
- username: `mentor3` - 刘导师 (二室)

**学员：**
- username: `student1` - 学员一 (一室，导师：mentor1)
- username: `student2` - 学员二 (一室，导师：mentor1)
- username: `student3` - 学员三 (一室，导师：mentor2)
- username: `student4` - 学员四 (二室，导师：mentor3)
- username: `student5` - 学员五 (二室，导师：mentor3)

**注意：** 所有用户密码都是 `hashed_password_xxx` 格式（实际应用中需要使用真实的密码哈希）

---

### 角色数据

1. 学员 (STUDENT)
2. 导师 (MENTOR)
3. 室经理 (DEPT_MANAGER)
4. 团队经理 (TEAM_MANAGER)
5. 管理员 (ADMIN)

---

### 部门数据

1. 一室 (DEPT_ONE) - 经理：manager1
2. 二室 (DEPT_TWO) - 经理：manager2

---

### 知识分类数据

**一级分类（6个）：**
- 双云 (CLOUD)
- 网络 (NETWORK)
- 数据库 (DATABASE)
- 应用 (APPLICATION)
- 应急场景 (EMERGENCY)
- 规章制度 (REGULATION)

**二级分类（5个）：**
- 手机银行 (MOBILE_BANK)
- 数字人民币 (DIGITAL_CURRENCY)
- 核心系统 (CORE_SYSTEM)
- PostgreSQL (POSTGRESQL)
- MySQL (MYSQL)

**三级分类/操作标签（6个）：**
- 重启 (RESTART)
- 隔离 (ISOLATE)
- 扩容 (SCALE_UP)
- 应急切换 (FAILOVER)
- 备份 (BACKUP)
- 恢复 (RESTORE)

---

### 知识文档数据

1. **数据库基础知识** - 介绍数据库的基本概念和分类
2. **PostgreSQL重启操作指南** - 详细介绍如何安全地重启PostgreSQL数据库
3. **数据库备份与恢复** - 数据库备份和恢复的最佳实践
4. **手机银行系统架构** - 手机银行系统的技术架构和业务流程
5. **应急处理流程** - 系统故障的应急处理流程和规范

---

### 题目数据

1. **单选题：** 以下哪个是关系型数据库？(答案：B - PostgreSQL)
2. **多选题：** 以下哪些是NoSQL数据库？(答案：A,C - MongoDB, Redis)
3. **判断题：** PostgreSQL支持JSON数据类型 (答案：true)
4. **简答题：** 请简述数据库备份的重要性和常见的备份策略
5. **单选题：** 数据库事务的ACID特性中，A代表什么？(答案：A - Atomicity)

---

### 测验数据

**数据库基础测验** (由mentor1创建)
- 包含5道题目
- 总分：100分
- 及格分：60分
- 题目分值：20, 20, 20, 30, 10

---

### 任务数据

1. **数据库基础学习** (学习任务)
   - 类型：LEARNING
   - 关联知识：数据库基础知识、PostgreSQL重启操作指南、数据库备份与恢复
   - 截止时间：7天后
   - 分配给：所有5个学员

2. **数据库知识练习** (练习任务)
   - 类型：PRACTICE
   - 关联测验：数据库基础测验
   - 关联知识：数据库基础知识
   - 截止时间：10天后
   - 分配给：所有5个学员

3. **数据库基础考试** (考试任务)
   - 类型：EXAM
   - 关联测验：数据库基础测验
   - 截止时间：14天后
   - 分配给：所有5个学员

---

### 答题记录

**student1** 已完成练习任务的第1次尝试：
- 总分：100分
- 得分：80分
- 答对题数：4题
- 用时：1800秒（30分钟）
- 状态：已评分

**答题详情：**
1. 单选题 - 正确 (20分)
2. 多选题 - 正确 (20分)
3. 判断题 - 正确 (20分)
4. 简答题 - 待评分 (20分)
5. 单选题 - 错误 (0分)

---

### 现场抽查记录

1. **student1** - 数据库应急处理 - 8分 - "回答流畅，处理方案合理"
2. **student2** - 系统架构设计 - 7分 - "基本正确，但缺少细节"

---

### 通知记录

1. **student1** - 新任务分配 - "你被分配了新的学习任务：数据库基础学习" (未读)
2. **student1** - 新任务分配 - "你被分配了新的练习任务：数据库知识练习" (已读)

---

### 学习统计

**student1** 的学习统计：
- 总任务数：3
- 完成任务数：1
- 总学习时长：7200分钟
- 总得分：80.00
- 平均分：80.00
- 总抽查次数：1
- 平均抽查分：8.00

---

## 测试建议

### 可以测试的API场景

1. **用户认证**
   - 使用 `admin` / `mentor1` / `student1` 等用户登录
   - 测试角色切换功能

2. **知识库查询**
   - 查询所有知识文档
   - 按分类筛选知识
   - 搜索关键词

3. **任务管理**
   - 查询学员的任务列表
   - 查看任务详情
   - 开始任务、完成任务

4. **答题功能**
   - 创建新的答题记录
   - 提交答案
   - 查看答题结果

5. **评分功能**
   - 查询待评分的主观题
   - 对简答题进行评分

6. **统计数据**
   - 查询学员统计数据
   - 查询任务完成情况
   - 查询知识热度

7. **现场抽查**
   - 创建新的抽查记录
   - 查询抽查历史

8. **通知管理**
   - 查询通知列表
   - 标记通知为已读

---

## 数据库连接信息

请使用Supabase提供的连接信息连接到数据库。

---

**创建时间：** 2024-12-12  
**数据库状态：** ✅ 已就绪，包含完整的模拟数据
